<!DOCTYPE html> 
<html lang="de">
	<head>
		<title>WordClock - Hardware Info</title>
		<meta charset="utf-8">
		<meta name="robots" content="noindex, nofollow">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		
		<link rel="stylesheet" href="http://cdn.jsdelivr.net/bootstrap/3.3.6/css/bootstrap.min.css" type="text/css">
				
		<script src="http://cdn.jsdelivr.net/g/jquery@1.12.4,bootstrap@3.3.6"></script>
		
		<!--[if lt IE 9]><script src="http://cdn.jsdelivr.net/g/html5shiv@3.7.2,respond@1.4.2"></script><![endif]-->
		
		<script type="text/javascript">
			jQuery(document).ready(function($) {
				function openWs() {
					var connection = new WebSocket('ws://'+location.hostname+':8080/hwinfo', []);
					
					connection.onmessage = function(e) {
						$('div.row').stop().fadeTo(500, 1);
						
						var result = $.parseJSON(e.data);
					
						for(var g in result) {
							for(var i in result[g]) {
								var obj = result[g][i];
								
								if(typeof(obj['value']) == "boolean" && obj['value']) {
									$('#'+i+' .true').show();
									$('#'+i+' .false').hide();
								}else if(typeof(obj['value']) == "boolean" && !obj['value']) {
									$('#'+i+' .true').hide();
									$('#'+i+' .false').show();
								}else if(typeof(obj["median"]) == "number") {
									if(i == "brightness") {
										$('#'+i+' .progress-bar').css({ width: obj["median"]/33+"%"});
									}
									if(i == "temp") {
										obj["min"] = obj["min"]*1000;
										obj["max"] = obj["max"]*1000;
										obj["median"] = obj["median"]*1000;
									}
									obj["min"] = Math.round(obj["min"])/1000;
									obj["max"] = Math.round(obj["max"])/1000;
									obj["median"] = Math.round(obj["median"])/1000;
									$('#'+i+' .min-value').text(obj["min"]);
									$('#'+i+' .max-value').text(obj["max"]);
									$('#'+i+' .value').text(obj["median"]);
								}
							}
						}
					};
					
					connection.onclose = openWsDelay;
				}
				
				function openWsDelay(e) {
					$('div.row').stop().fadeTo(500, 0.3);
					setTimeout(function() {
						openWs();
					}, 2000);
				};
				
				openWs();
			});
		</script>
	</head>

	<body>
		<div class="container">
			<h1 class="page-header"><span class="glyphicon glyphicon-info-sign"></span> Hardware Info</h1>
			
			<ol class="breadcrumb">
				<li><a href="/">Home</a></li>
				<li class="active">Hardware Info</li>
			</ol>
			
			<div class="row">
				<div class="col-sm-3 col-xs-6">
					<div id="vdd5v" data-group="lradcs" class="panel panel-default">
					  <div class="panel-heading">
						<h3 class="panel-title"><span class="glyphicon glyphicon-scale"></span> VDD 5V</h3>
					  </div>
					  <div class="panel-body text-center">
						<small>min. <span class="min-value"></span> V</small><br>
						<span class="h2"><span class="value">5</span> V</span><br>
						<small>max. <span class="max-value"></span> V</small>
					  </div>
					</div>
				</div>
				<div class="col-sm-3 col-xs-6">
					<div id="vddio" data-group="lradcs" class="panel panel-default">
					  <div class="panel-heading">
						<h3 class="panel-title"><span class="glyphicon glyphicon-scale"></span> VDD IO</h3>
					  </div>
					  <div class="panel-body text-center">
						<small>min. <span class="min-value"></span> V</small><br>
						<span class="h2"><span class="value">5</span> V</span><br>
						<small>max. <span class="max-value"></span> V</small>
					  </div>
					</div>
				</div>
				<div class="col-sm-3 col-xs-6">
					<div id="battery" data-group="lradcs" class="panel panel-default">
					  <div class="panel-heading">
						<h3 class="panel-title"><span class="glyphicon glyphicon-flash"></span> Battery</h3>
					  </div>
					  <div class="panel-body text-center">
						<small>min. <span class="min-value"></span> V</small><br>
						<span class="h2"><span class="value">4</span> V</span><br>
						<small>max. <span class="max-value"></span> V</small>
					  </div>
					</div>
				</div>
				<div class="col-sm-3 col-xs-6">
					<div id="temp" data-group="lradcs" class="panel panel-default">
					  <div class="panel-heading">
						<h3 class="panel-title"><span class="glyphicon glyphicon-fire"></span> Temperature</h3>
					  </div>
					  <div class="panel-body text-center">
						<small>min. <span class="min-value"></span>°C</small><br>
						<span class="h2"><span class="value">20</span>°C</span><br>
						<small>max. <span class="max-value"></span>°C</small>
					  </div>
					</div>
				</div>
				<div class="col-xs-12">
					<div id="brightness" data-group="lradcs" class="panel panel-default">
					  <div class="panel-heading">
						<h3 class="panel-title"><span class="glyphicon glyphicon-adjust"></span> Brightness</h3>
					  </div>
					  <div class="panel-body text-center">
						<div class="progress">
						  <div class="progress-bar" role="progressbar" style="width: 60%;">
							<span class="value">60</span>V
						  </div>
						</div>
						<div style="margin-top: -20px;">
						  <small>min. <span class="min-value"></span>V</small>, 
						  <small>max. <span class="max-value"></span>V</small>
						</div>
					  </div>
					</div>
				</div>
				<div class="col-sm-3 col-xs-6">
					<div id="motion" data-group="gpios" class="panel panel-default">
					  <div class="panel-heading">
						<h3 class="panel-title"><span class="glyphicon glyphicon-user"></span> Motion</h3>
					  </div>
					  <div class="panel-body">
						<p class="text-center h1"><span style="color: green;" class="glyphicon glyphicon-ok true"></span><span style="color: red;" class="glyphicon glyphicon-remove false"></span></p>
					  </div>
					</div>
				</div>
				<div class="col-sm-3 col-xs-6">
					<div id="button0" data-group="gpios" class="panel panel-default">
					  <div class="panel-heading">
						<h3 class="panel-title"><span class="glyphicon glyphicon-download-alt"></span> Button 0</h3>
					  </div>
					  <div class="panel-body">
						<p class="text-center h1"><span style="color: green;" class="glyphicon glyphicon-ok true"></span><span style="color: red;" class="glyphicon glyphicon-remove false"></span></p>
					  </div>
					</div>
				</div>
				<div class="col-sm-3 col-xs-6">
					<div id="button1" data-group="gpios" class="panel panel-default">
					  <div class="panel-heading">
						<h3 class="panel-title"><span class="glyphicon glyphicon-download-alt"></span> Button 1</h3>
					  </div>
					  <div class="panel-body">
						<p class="text-center h1"><span style="color: green;" class="glyphicon glyphicon-ok true"></span><span style="color: red;" class="glyphicon glyphicon-remove false"></span></p>
					  </div>
					</div>
				</div>
				<div class="col-sm-3 col-xs-6">
					<div id="button2" data-group="gpios" class="panel panel-default">
					  <div class="panel-heading">
						<h3 class="panel-title"><span class="glyphicon glyphicon-download-alt"></span> Button 2</h3>
					  </div>
					  <div class="panel-body">
						<p class="text-center h1"><span style="color: green;" class="glyphicon glyphicon-ok true"></span><span style="color: red;" class="glyphicon glyphicon-remove false"></span></p>
					  </div>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>
